<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Babays Perfume Collection</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* --- –ú–ò–ù–ò–ú–ê–õ–ò–°–¢–ò–ß–ù–ê–Ø –¶–í–ï–¢–û–í–ê–Ø –ü–ê–õ–ò–¢–†–ê --- */
:root{
  --bg:#f7f4f0; /* –¢–µ–ø–ª—ã–π –±–µ–∂–µ–≤—ã–π —Ñ–æ–Ω */
  --card:#ffffff; /* –ß–∏—Å—Ç—ã–π –±–µ–ª—ã–π –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
  --muted:#8b8580; /* –¢–µ–ø–ª—ã–π —Å–µ—Ä—ã–π */
  --accent:#b3873a; /* –ó–æ–ª–æ—Ç–∏—Å—Ç–∞—è –±—Ä–æ–Ω–∑–∞ */
  --dark:#2c2c2c; /* –ì–ª—É–±–æ–∫–∏–π –≥—Ä–∞—Ñ–∏—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
  --radius:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
  background:var(--bg);
  color:var(--dark);
  line-height:1.4;
}
/* App Bar */
header.appbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 20px;background:var(--card);
  border-bottom:1px solid rgba(0,0,0,0.05);position:sticky;top:0;z-index:20;
}
.brand{display:flex;gap:12px;align-items:center}
.logo{
  width:40px;height:40px;border-radius:8px;background:var(--dark);color:#fff;
  display:flex;align-items:center;justify-content:center;font-family:"Playfair Display";font-size:18px;font-weight:700;
}
.title{font-size:18px;font-family:"Playfair Display";font-weight:600;}
.subtitle{font-size:12px;color:var(--muted)}

/* Badge */
.heart-badge{position:absolute;right:0px;top:0px;background:var(--accent);color:#fff;border-radius:50%;width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;display:none; z-index: 50;}

/* Search and Filter */
.search-row{display:flex;gap:12px;padding:14px 16px;background:var(--bg);}
.search{
  flex:1;display:flex;gap:10px;background:var(--card);padding:10px 12px;border-radius:12px;
  border:1px solid rgba(0,0,0,0.08);
  align-items:center;
}
.search input{border:0;outline:none;background:transparent;font-size:15px;width:100%}

.filter-select{
    width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,0.1);
    background:var(--card);color:var(--dark);font-size:14px;
}

main.container{padding:16px; min-height: calc(100vh - 60px);}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(150px,1fr));
  gap:12px;
}

/* Card Style */
.card{
  position:relative;
  background:var(--card);
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  box-shadow:0 8px 16px rgba(0,0,0,0.04);
  transition:transform 0.2s, box-shadow 0.2s;
}
.card:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 24px rgba(0,0,0,0.08);
}

.card .img{
  width:100%;
  aspect-ratio:1/1;
  background-size:cover;
  background-position:center;
  border-bottom:1px solid #eee;
}

.card .info{
  padding:12px 8px;
  text-align:center;
}

.card .name{
  font-size:14px;
  font-weight:600;
  margin-bottom:4px;
  color:var(--dark);
}

.card .meta{
  font-size:12px;
  color:var(--muted);
}

/* Modals */
.modal-back{
  position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;
  justify-content:center;align-items:center;padding:20px;z-index:40;
}
.modal{
  background:var(--card);border-radius:18px;
  overflow:hidden;box-shadow:0 30px 80px rgba(0,0,0,0.3);
  width:100%;max-width:760px;
}
.modal-photo{width:46%;min-height:340px;background-size:cover;background-position:center}
.modal-body{padding:20px}

.ml{padding:8px 12px;border-radius:8px;border:1px solid var(--muted);background:var(--bg);cursor:pointer;margin-right:6px;margin-bottom:6px;font-size:14px}
.ml.selected{background:var(--accent);color:#fff;border-color:var(--accent);}

/* --- Navigation & Pages --- */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px; 
  background: var(--card);
  box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: 30;
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  text-decoration: none;
  color: var(--muted);
  font-size: 10px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  transition: color 0.2s;
}

.nav-item svg {
  width: 24px;
  height: 24px;
  margin-bottom: 0px;
  color: var(--muted);
  transition: color 0.2s;
}

.nav-item.active svg {
  color: var(--accent);
}

.nav-item.active {
    color: var(--dark);
}

.page-content {
  display: none; 
  padding-bottom: 70px;
}

.page-content.active {
  display: block; 
}

/* Home Page */
#homePage {
  padding: 30px 16px;
  max-width: 600px;
  margin: 0 auto;
}

#homePage h2 {
  font-family: 'Playfair Display', serif;
  font-size: 26px;
  color: var(--dark);
  margin-bottom: 20px;
  margin-top: 0;
  border-bottom: 2px solid var(--accent);
  padding-bottom: 5px;
  display: inline-block;
}

#homePage p {
  line-height: 1.7;
  color: #555;
  margin-bottom: 18px;
  font-size: 15px;
}

/* Booking Buttons */
.deliveryBtn{
    flex:1;padding:10px;border-radius:8px;border:1px solid var(--muted);background:var(--bg);
    cursor:pointer;font-size:15px;color:var(--dark);
}
.deliveryBtn.selected{
    background:var(--accent);color:#fff;border-color:var(--accent);
}

/* Primary Button Style */
#addFavBtn, #openBooking, #sendOrder, #openTelegram {
    background: var(--dark) !important;
    color: #fff !important;
    border-radius: 10px !important;
    font-weight: 600;
}

/* –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∏–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ */
.fav-item {
    display:flex;
    gap:12px;
    align-items:center;
    padding:10px;
    border-radius:10px;
    background:var(--bg);
    margin-bottom:8px;
}

.fav-item img {
    width: 64px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ */
    height: 64px;
    border-radius: 8px;
    object-fit: cover;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
}
</style>
</head>
<body>

<header class="appbar">
  <div class="brand">
    <div class="logo">B</div>
    <div>
      <div class="title">Babays Perfume </div>
      <div class="subtitle" id="pageSubtitle">–ì–ª–∞–≤–Ω–∞—è</div>
    </div>
  </div>
</header>

<div id="homePage" class="page-content active">
  <h2>–û Babays Perfume </h2>
  <p>
    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ BabaysPerfume ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –ª–µ–≥–µ–Ω–¥—ã –ø–∞—Ä—Ñ—é–º–µ—Ä–∏–∏ –æ–∂–∏–≤–∞—é—Ç‚ú®
  </p>
  <p>
    üíé –õ—é–±–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, —Å—Ç–æ–π–∫–∏–π –∏ –¥–æ—Ä–æ–≥–æ–π –ø–æ –∑–≤—É—á–∞–Ω–∏—é –ø–∞—Ä—Ñ—é–º? –ú—ã —Ç–æ–∂–µ. 
üìç –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥—ë—Ç–µ –∞—Ä–æ–º–∞—Ç—ã –ø–æ –º–æ—Ç–∏–≤–∞–º —Å–∞–º—ã—Ö –∫—É–ª—å—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–∑–∏—Ü–∏–π ‚Äî —Å —Ç–æ—á–Ω–æ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–æ–π, –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ –¥—É—à–æ–π –≤ –∫–∞–∂–¥–æ–º —Ñ–ª–∞–∫–æ–Ω–µ.
  </p>
  <p>
    ‚ñ™Ô∏è –ë–æ–ª–µ–µ 800 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞—Ä–æ–º–∞—Ç–æ–≤ –æ—Ç –≤–µ–¥—É—â–∏—Ö –º–∏—Ä–æ–≤—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
</p>
  <p>
‚ñ™Ô∏è –†–∞–∑–Ω—ã–µ –æ–±—ä—ë–º—ã ‚Äî –æ—Ç 7 –º–ª –¥–æ 100 –º–ª.
</p>
  <p>
‚ñ™Ô∏è –õ–∏—á–Ω—ã–π –ø–æ–¥–±–æ—Ä –ø–æ–¥ –≤–∞—à –≤–∫—É—Å.
</p>
  <p>
‚ñ™Ô∏è –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–π–∫–æ—Å—Ç—å ‚Äî –æ—Ç 12+ —á–∞—Å–æ–≤.
</p>
  <p>
‚ñ™Ô∏è –ë–µ–∑—É–ø—Ä–µ—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä—ã–º –º—ã –≥–æ—Ä–¥–∏–º—Å—è.
  </p>
</div>

<div id="catalogPage" class="page-content">
  <div class="search-row">
    <div class="search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.6"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2"/></svg>
      <input type="search" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –Ω–æ—Ç–∞–º –∏–ª–∏ –±—Ä–µ–Ω–¥—É" />
    </div>
  </div>
  
  <div style="padding:12px 16px 16px 16px; background: var(--bg);">
    <select id="filterSelect" class="filter-select">
      <option value="all">–í—Å–µ –∞—Ä–æ–º–∞—Ç—ã</option>
      <option value="hit">‚ú® –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</option>
      <option value="new">üÜï –ù–æ–≤–∏–Ω–∫–∏</option>
      <option value="–ñ–µ–Ω—Å–∫–∏–π">üë© –ñ–µ–Ω—Å–∫–∏–µ</option>
      <option value="–ú—É–∂—Å–∫–æ–π">üë® –ú—É–∂—Å–∫–∏–µ</option>
      <option value="–£–Ω–∏—Å–µ–∫—Å">üöª –£–Ω–∏—Å–µ–∫—Å</option>
    </select>
  </div>
  
  <main class="container">
    <div class="grid" id="catalogGrid"></div>
  </main>
</div>


<div class="modal-back" id="modalBack">
  <div class="modal" id="modalCard">
    <div style="display:flex;flex-wrap:wrap">
      <div class="modal-photo" id="modalPhoto"></div>
      <div class="modal-body" style="flex:1">
        <h2 class="name" id="modalName" style="margin:0 0 6px;font-family:'Playfair Display'"></h2>
        <div class="meta" id="modalGender" style="margin-bottom:10px;color:#777"></div>
        <div class="notes" id="modalNotes" style="font-size:14px;color:#555;line-height:1.4"></div>

        <div id="mlChoice" style="margin-top:18px;display:block">
          <div id="priceBlock" style="margin-top:10px;font-size:20px;font-weight:700;color:var(--accent)">
            –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä—ë–º
          </div>
          <div style="margin-bottom:8px;color:#888;font-size:13px;margin-top:8px;">–î–æ—Å—Ç—É–ø–Ω—ã–π –æ–±—ä—ë–º:</div>
          <div class="ml-choose" id="mlOptions" style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="ml">7</button>
            <button class="ml">15</button>
            <button class="ml">30</button>
            <button class="ml">50</button>
            <button class="ml">100</button>
          </div>
        </div>

        <div style="margin-top:20px;display:flex;gap:10px">
          <button id="addFavBtn" style="flex:1;padding:12px 14px;border:0;cursor:pointer">
            –î–æ–±–∞–≤–∏—Ç—å 
          </button>
          <button id="closeModal" style="padding:12px 14px;background:#eee;border-radius:10px;border:0;cursor:pointer;font-weight:600">
            –ó–∞–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-back" id="favBack">
  <div class="modal" id="favModal" style="max-width:500px;padding-bottom:10px">
    <div style="padding:14px 16px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:700;font-size:18px;font-family:'Playfair Display'">–ú–æ–π –Ω–∞–±–æ—Ä</div>
      <button id="closeFav" style="background:var(--bg);border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700;color:var(--dark)">‚úï</button>
    </div>

    <div id="giftBlock" style="padding:12px;border-bottom:1px solid #f3f3f3;background:#e9fce9;display:none">
      <div style="font-size:16px;margin-bottom:4px;color:#189618;font-weight:600">üéÅ –ü–æ–¥–∞—Ä–æ–∫ </div>
      <div style="color:#666;font-size:14px"> </div>
    </div>

    <div class="fav-list" id="favList" style="padding:12px"></div>

    <div style="padding:16px">
      <button id="openBooking" style="width:100%;padding:14px;border:0;cursor:pointer">
      –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
      </button>
    </div>
  </div>
</div>

<div class="modal-back" id="bookBack">
  <div class="modal" id="bookModal" style="max-width:420px;padding:20px">
    <h3 style="margin-top:0;font-family:'Playfair Display';font-size:22px;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ </h3>

    <label style="display:block;margin-top:14px;color:#555;font-size:14px;">–í–∞—à–µ –∏–º—è:</label>
    <input id="bookName" type="text" style="width:100%;padding:12px;border-radius:10px;border:1px solid #ccc;margin-top:4px;font-size:15px">

    <label style="display:block;margin-top:14px;color:#555;font-size:14px;">–ü—Ä–æ–º–æ–∫–æ–¥ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏):</label>
    <input id="bookPromo" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" style="width:100%;padding:12px;border-radius:10px;border:1px solid #ccc;margin-top:4px;font-size:15px">

    <div id="totalBlock" style="padding:16px 0;border-top:1px solid #eee;margin-top:20px;font-size:16px">
      <div>–°—É–º–º–∞ —Ç–æ–≤–∞—Ä–æ–≤: <b id="sumPrice" style="color:var(--dark)">0 ‚ÇΩ</b></div>
      <div id="discountLine" style="display:none;color:#189618;font-weight:600;margin-top:4px">
        –°–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É: ‚àí<span id="discountPrice">0</span> ‚ÇΩ
      </div>
      <div style="margin-top:12px;font-size:18px;font-weight:700">
        –ò—Ç–æ–≥–æ : <b id="finalPrice" style="color:var(--accent)">0 ‚ÇΩ</b>
      </div>
    </div>

    <div style="margin-top:20px;color:#555;font-size:14px;">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</div>
    <div style="display:flex;gap:10px;margin-top:8px">
      <button class="deliveryBtn" data-type="–ö—É—Ä—å–µ—Ä –ø–æ –ú–æ—Å–∫–≤–µ">
        üöö –ö—É—Ä—å–µ—Ä
      </button>
      <button class="deliveryBtn" data-type="–Ø–Ω–¥–µ–∫—Å –ü–í–ó">
        üì¶ –Ø–Ω–¥–µ–∫—Å –ü–í–ó
      </button>
    </div>

    <button id="sendOrder"
      style="width:100%;margin-top:28px;padding:14px;border:0;cursor:pointer">
      –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É
    </button>

    <button id="closeBooking" style="margin-top:12px;width:100%;padding:12px;background:var(--bg);border:0;border-radius:10px;cursor:pointer;color:var(--dark)">
      –û—Ç–º–µ–Ω–∞
    </button>
  </div>
</div>

<div class="modal-back" id="supportBack">
    <div class="modal" id="supportModal" style="max-width:380px;padding:20px;text-align:center;">
        <h3 style="margin-top:0;font-family:'Playfair Display';font-size:22px;">–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
        <p style="color:#666;font-size:15px;line-height:1.5;">
            –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å –≤—ã–±–æ—Ä–æ–º –∏–ª–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞.
        </p>
        <p style="color:var(--accent);font-size:14px;margin-bottom:20px;font-weight:600;">
            –ù–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É, –≤—ã –ø–µ—Ä–µ–π–¥–µ—Ç–µ –≤ –Ω–∞—à Telegram-—á–∞—Ç.
        </p>
        <button id="openTelegram"
            style="width:100%;padding:14px;border:0;cursor:pointer;background:#0088cc !important;">
            –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
        </button>
        <button id="closeSupport"
            style="width:100%;padding:12px;background:var(--bg);border:0;border-radius:10px;cursor:pointer;font-size:15px;margin-top:10px;color:var(--dark)">
            –û—Ç–º–µ–Ω–∞
        </button>
    </div>
</div>


<div class="bottom-nav">
  <div class="nav-item active" data-page="home">
    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>
    –ì–ª–∞–≤–Ω–∞—è
  </div>
  <div class="nav-item" data-page="catalog">
    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15.93v-7.86l4 3.93-4 3.93z"/></svg>
    –ö–∞—Ç–∞–ª–æ–≥
  </div>
  <div class="nav-item" data-page="fav">
    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    –ú–æ–π –Ω–∞–±–æ—Ä
    <div class="heart-badge" id="favCount">0</div>
  </div>
  <div class="nav-item" data-page="support">
    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
    –ü–æ–¥–¥–µ—Ä–∂–∫–∞
  </div>
</div>

<script>
const catalog = [
  {
    "name": "Amouage ‚Äî Interlude Man",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "new": true,
    "img": "https://t.me/babaysperfume/200",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –æ—Ä–µ–≥–∞–Ω–æ",
      "middle": "–∞–º–±—Ä–∞, –æ–ø–æ–ø–æ–Ω–∞–∫—Å",
      "base": "–≤–æ—Å—Ç–æ—á–Ω—ã–µ —Å–º–æ–ª—ã, –∫–æ–∂–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Bvlgari ‚Äî Tygar",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://i.imgur.com/fuvcd5m.jpeg",
    "notes": {
      "top": "–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç",
      "middle": "–∏–º–±–∏—Ä—å, –ê–º–±—Ä–µ—Ç—Ç–∞",
      "base": "Ambroxan, –º—É—Å–∫—É—Å, –≤–µ—Ç–∏–≤–µ—Ä, –ø–∞—á—É–ª–∏"
    },
    "new": true,
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Chanel ‚Äî Bleu De Chanel",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/195",
    "notes": {
      "top": "–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç",
      "middle": "–∏–º–±–∏—Ä—å, –∂–∞—Å–º–∏–Ω",
      "base": "–∫–µ–¥—Ä, —Å–∞–Ω–¥–∞–ª"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Creed ‚Äî Absolu Aventus",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/219",
    "notes": {
      "top": "–∞–Ω–∞–Ω–∞—Å, –±–µ—Ä–≥–∞–º–æ—Ç",
      "middle": "–±–µ—Ä–µ–∑–∞, –∂–∞—Å–º–∏–Ω",
      "base": "–º—É—Å–∫—É—Å, –¥—É–±–æ–≤—ã–π –º–æ—Ö"
    },
    "hit": true,
    "new": true,
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Creed ‚Äî Aventus",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "hit": true,
    "img": "https://t.me/babaysperfume/205",
    "notes": {
      "top": "–∞–Ω–∞–Ω–∞—Å, —á–µ—Ä–Ω–∞—è —Å–º–æ—Ä–æ–¥–∏–Ω–∞",
      "middle": "–±–µ—Ä–µ–∑–∞, –∂–∞—Å–º–∏–Ω",
      "base": "–º–æ—Ö, –≤–∞–Ω–∏–ª—å"
    },
    "prices": { "7": 800, "15": 1500, "30": 2700, "50": 4500, "100": 8000 }
  },
  {
    "name": "Creed ‚Äî Aventus Black",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/176",
    "notes": {
      "top": "—Ü–∏—Ç—Ä—É—Å, —Ä–æ–∑–º–∞—Ä–∏–Ω",
      "middle": "–∫–æ–∂–∞, –ø–∞—á—É–ª–∏",
      "base": "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Creed ‚Äî Viking",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/208",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, —Ü–∏—Ç—Ä—É—Å",
      "middle": "–ª–∞–≤–∞–Ω–¥–∞, –≥–µ—Ä–∞–Ω—å",
      "base": "–∫–µ–¥—Ä, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Dior ‚Äî Sauvage",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/201",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –ø–µ—Ä–µ—Ü",
      "middle": "—Å–∏—á—É–∞–Ω—Å–∫–∏–π –ø–µ—Ä–µ—Ü, –ª–∞–≤–∞–Ω–¥–∞",
      "base": "–∞–º–±—Ä–æ–∫—Å–∞–Ω, –≤–∞–Ω–∏–ª—å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Dior ‚Äî Sauvage Elixir",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/160",
    "notes": {
      "top": "–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç, –∫–æ—Ä–∏—Ü–∞",
      "middle": "–ª–∞–≤–∞–Ω–¥–∞, –º—É—Å–∫—É—Å",
      "base": "—Å–∞–Ω–¥–∞–ª, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Givenchy ‚Äî Givenchy Pour Homme",
    "gender": "–ú—É–∂—Å–∫–æ–π",
    "img": "https://t.me/babaysperfume/181",
    "notes": {
      "top": "–ª–∏–º–æ–Ω, –±–µ—Ä–≥–∞–º–æ—Ç",
      "middle": "–ª–∞–≤–∞–Ω–¥–∞, —Ä–æ–∑–º–∞—Ä–∏–Ω",
      "base": "–∫–µ–¥—Ä, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Amouage ‚Äî Interlude Woman",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/229",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –º–∞–Ω–¥–∞—Ä–∏–Ω",
      "middle": "–∂–µ–º—á—É–∂–Ω—ã–π –∂–∞—Å–º–∏–Ω, —Ä–æ–∑–∞",
      "base": "—Å–∞–Ω–¥–∞–ª, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Anna Sui ‚Äî Fantasia",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/168",
    "notes": {
      "top": "–∫—Ä–∞—Å–Ω—ã–µ —è–≥–æ–¥—ã, –∞–ø–µ–ª—å—Å–∏–Ω",
      "middle": "–ø–∞—á—É–ª–∏, —Ä–æ–∑–∞",
      "base": "–≤–∞–Ω–∏–ª—å, –º—É—Å–∫—É—Å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Boadicea the Victorious ‚Äî Heroine",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/186",
    "notes": {
      "top": "–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç, —á–µ—Ä–Ω–∞—è —Å–º–æ—Ä–æ–¥–∏–Ω–∞",
      "middle": "–∂–∞—Å–º–∏–Ω, –ø–∞—á—É–ª–∏",
      "base": "–≤–∞–Ω–∏–ª—å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "By Kilian ‚Äî Good Girl Gone Bad",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/202",
    "notes": {
      "top": "–≥–∞—Ä–¥–µ–Ω–∏—è, –∂–∞—Å–º–∏–Ω",
      "middle": "—Ç—É–±–µ—Ä–æ–∑–∞, –∏–ª–∞–Ω–≥-–∏–ª–∞–Ω–≥",
      "base": "–∫–∞—à–º–∏—Ä—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ, –±–æ–±—ã —Ç–æ–Ω–∫–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Chanel ‚Äî Chance Eau de Parfum",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/170",
    "notes": {
      "top": "—Ü–∏—Ç—Ä—É—Å, –∞–Ω–∞–Ω–∞—Å",
      "middle": "–∂–∞—Å–º–∏–Ω, –∏—Ä–∏—Å",
      "base": "–≤–∞–Ω–∏–ª—å, –ø–∞—á—É–ª–∏"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Christian Dior ‚Äî Addict",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/180",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –º–∞–Ω–¥–∞—Ä–∏–Ω",
      "middle": "–∂–∞—Å–º–∏–Ω, –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç",
      "base": "–≤–∞–Ω–∏–ª—å, —Å–∞–Ω–¥–∞–ª"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Creed ‚Äî Carmina",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/162",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç",
      "middle": "–∂–∞—Å–º–∏–Ω, —Ä–æ–∑–∞",
      "base": "–º—É—Å–∫—É—Å, —Å–∞–Ω–¥–∞–ª"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Juliette Has A Gun ‚Äî Not A Perfume",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/194",
    "notes": {
      "top": "Cetalox (–º–∏–Ω–∏–º–∞–ª–∏–∑–º)",
      "middle": "‚Äî",
      "base": "‚Äî"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Parfums de Marly ‚Äî Layton",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/158",
    "notes": {
      "top": "—è–±–ª–æ–∫–æ, –ª–∞–≤–∞–Ω–¥–∞",
      "middle": "–∂–∞—Å–º–∏–Ω, –≥–µ—Ä–∞–Ω—å",
      "base": "–≤–∞–Ω–∏–ª—å, —Å–∞–Ω–¥–∞–ª"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Maison Francis Kurkdjian ‚Äî Baccarat Rouge 540",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/177",
    "notes": {
      "top": "—Å–∞—Ñ—Ä–∞–Ω, –∂–∞—Å–º–∏–Ω",
      "middle": "–∫–µ–¥—Ä, –∞–º–±—Ä–∞",
      "base": "–∫—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –º—É—Å–∫—É—Å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Tom Ford ‚Äî Lost Cherry",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/196",
    "notes": {
      "top": "–≤–∏—à–Ω—è, –º–∏–Ω–¥–∞–ª—å",
      "middle": "–∫—Ä–∞—Å–Ω—ã–µ —è–≥–æ–¥—ã",
      "base": "–≤–µ—Ç–∏–≤–µ—Ä, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Vilhelm Parfumerie ‚Äî Mango Skin",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://i.imgur.com/QSRpNYN.jpeg",
    "notes": {
      "top": "–ú–∞–Ω–≥–æ, –µ–∂–µ–≤–∏–∫–∞, —á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü.",
      "middle": "–ö–æ—Ä–µ–Ω—å –∏—Ä–∏—Å–∞, –∂–∞—Å–º–∏–Ω, –ª–æ—Ç–æ—Å.",
      "base": "–≤–∞–Ω–∏–ª—å, —Ä–æ–∑–æ–≤–∞—è –≥–ª–∞–∑—É—Ä—å, –ø–∞—á—É–ª–∏."
    },
    "new": true,
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Lanvin ‚Äî √âclat d‚ÄôArp√®ge",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/183",
    "notes": {
      "top": "–≥—Ä—É—à–∞, –∑–µ–ª—ë–Ω—ã–π —á–∞–π",
      "middle": "–∂–∞—Å–º–∏–Ω, –ª–∞–Ω–¥—ã—à",
      "base": "–∫–µ–¥—Ä, –º—É—Å–∫—É—Å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Tiffany ‚Äî Tiffany & Co",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/231",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç",
      "middle": "–∏—Ä–∏—Å, –∂–∞—Å–º–∏–Ω",
      "base": "–∫–µ–¥—Ä, –±–µ–ª—ã–π –º—É—Å–∫—É—Å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Trussardi ‚Äî Trussardi Donna",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/188",
    "notes": {
      "top": "–±–µ—Ä–≥–∞–º–æ—Ç, –º–∞–Ω–¥–∞—Ä–∏–Ω",
      "middle": "—Ä–æ–∑–∞, –∂–∞—Å–º–∏–Ω",
      "base": "—Å–∞–Ω–¥–∞–ª, –º—É—Å–∫—É—Å"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Versace ‚Äî Bright Crystal",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/179",
    "notes": {
      "top": "–≥—Ä–∞–Ω–∞—Ç, —é–∑—É",
      "middle": "–ø–∏–æ–Ω, –º–∞–≥–Ω–æ–ª–∏—è",
      "base": "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Yves Saint Laurent ‚Äî Libre",
    "gender": "–ñ–µ–Ω—Å–∫–∏–π",
    "img": "https://t.me/babaysperfume/230",
    "notes": {
      "top": "–ª–∞–≤–∞–Ω–¥–∞, –º–∞–Ω–¥–∞—Ä–∏–Ω",
      "middle": "–∂–∞—Å–º–∏–Ω, –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç",
      "base": "–≤–∞–Ω–∏–ª—å, –∫–µ–¥—Ä"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Afnan ‚Äî Tribute Blue",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/167",
    "notes": {
      "top": "—Ü–∏—Ç—Ä—É—Å, –º–æ—Ä—Å–∫–∞—è —Å–≤–µ–∂–µ—Å—Ç—å",
      "middle": "–ª–∞–≤–∞–Ω–¥–∞, –∂–∞—Å–º–∏–Ω",
      "base": "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Ajmal ‚Äî Amber Wood",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/224",
    "notes": {
      "top": "–∞–ø–µ–ª—å—Å–∏–Ω, —Å–ø–µ—Ü–∏–∏",
      "middle": "–∞–º–±—Ä–æ–≤—ã–µ –Ω–æ—Ç—ã, –¥—Ä–µ–≤–µ—Å–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã",
      "base": "–≤–∞–Ω–∏–ª—å, –∫–µ–¥—Ä"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Al-Rehab ‚Äî Choco Musk",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/227",
    "notes": {
      "top": "—à–æ–∫–æ–ª–∞–¥, –∞–ø–µ–ª—å—Å–∏–Ω",
      "middle": "–º—É—Å–∫—É—Å, —Å–ø–µ—Ü–∏–∏",
      "base": "–≤–∞–Ω–∏–ª—å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Tom Ford ‚Äî Tobacco Vanille",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/236",
    "notes": {
      "top": "—Ç–∞–±–∞–∫, —Å–ø–µ—Ü–∏–∏",
      "middle": "–≤–∞–Ω–∏–ª—å, –∫–∞–∫–∞–æ",
      "base": "—Å–∞–Ω–¥–∞–ª, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Tom Ford ‚Äî Vanilla Sex",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/209",
    "notes": {
      "top": "–≤–∞–Ω–∏–ª—å, —Ü–∏—Ç—Ä—É—Å",
      "middle": "—Ü–≤–µ—Ç–æ—á–Ω—ã–µ –Ω–æ—Ç—ã",
      "base": "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Vilhelm Parfumerie ‚Äî Dear Polly",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/220",
    "notes": {
      "top": "—Ü–∏—Ç—Ä—É—Å, –º—è—Ç–∞",
      "middle": "—Ü–≤–µ—Ç–æ—á–Ω—ã–µ –Ω–æ—Ç—ã",
      "base": "–º—É—Å–∫—É—Å, –∫–µ–¥—Ä"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Xerjoff ‚Äî Erba Gold",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/233",
    "notes": {
      "top": "—Ü–∏—Ç—Ä—É—Å, –∞–ø–µ–ª—å—Å–∏–Ω",
      "middle": "–±–µ—Ä–≥–∞–º–æ—Ç, —Ñ—Ä—É–∫—Ç—ã",
      "base": "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Zielinski & Rozen ‚Äî Black Pepper",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/198",
    "notes": {
      "top": "—á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü, —Å–ø–µ—Ü–∏–∏",
      "middle": "–∫–æ—Ä–∏—Ü–∞, –ø—Ä—è–Ω—ã–µ –Ω–æ—Ç—ã",
      "base": "–º—É—Å–∫—É—Å, –∫–µ–¥—Ä"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  },
  {
    "name": "Zielinski & Rozen ‚Äî Pink Pepper",
    "gender": "–£–Ω–∏—Å–µ–∫—Å",
    "img": "https://t.me/babaysperfume/182",
    "notes": {
      "top": "—Ä–æ–∑–æ–≤—ã–π –ø–µ—Ä–µ—Ü, —Ü–∏—Ç—Ä—É—Å",
      "middle": "—Ü–≤–µ—Ç–æ—á–Ω—ã–µ –Ω–æ—Ç—ã",
      "base": "–º—É—Å–∫—É—Å, —Å–∞–Ω–¥–∞–ª"
    },
    "prices": { "7": 550, "15": 1100, "30": 1980, "50": 2750, "100": 4950 }
  }
];


const grid = document.getElementById("catalogGrid");
const searchInput = document.getElementById("search");
const favCount = document.getElementById("favCount"); 

const modalBack = document.getElementById("modalBack");
const modalPhoto = document.getElementById("modalPhoto");
const modalName = document.getElementById("modalName");
const modalGender = document.getElementById("modalGender");
const modalNotes = document.getElementById("modalNotes");
const mlOptions = document.getElementById("mlOptions");
const closeModalBtn = document.getElementById("closeModal");
const addFavBtn = document.getElementById("addFavBtn");

const favBack = document.getElementById("favBack");
const favList = document.getElementById("favList");
const closeFav = document.getElementById("closeFav");
const giftBlock = document.getElementById("giftBlock");

const bookBack = document.getElementById("bookBack");
const closeBooking = document.getElementById("closeBooking");
const openBooking = document.getElementById("openBooking");
const sendOrder = document.getElementById("sendOrder");
const bookName = document.getElementById("bookName");
const bookPromo = document.getElementById("bookPromo");
bookPromo.oninput = calculateTotal;

const supportBack = document.getElementById("supportBack");
const closeSupport = document.getElementById("closeSupport");
const openTelegram = document.getElementById("openTelegram");

let chosenDelivery = null;
let selectedML = null;
let currentItem = null;
const priceBlock = document.getElementById("priceBlock");
const pageSubtitle = document.getElementById("pageSubtitle");

const navItems = document.querySelectorAll(".bottom-nav .nav-item");
const pages = {
    'home': document.getElementById("homePage"),
    'catalog': document.getElementById("catalogPage")
};


const LS_KEY = "babays_favs_v3";
function readFavs(){try{return JSON.parse(localStorage.getItem(LS_KEY)||"[]")}catch{return[]}}
function writeFavs(arr){localStorage.setItem(LS_KEY,JSON.stringify(arr));updateFavCount()}
function updateFavCount(){const favs=readFavs();favCount.style.display=favs.length?"flex":"none";if(favs.length) favCount.textContent=favs.length}

let activeGender="all";
let searchQuery="";

function renderCatalog(){
  grid.innerHTML="";
  const q = searchQuery.trim().toLowerCase();
  
  // –†–∞–∑–±–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º—É—Å–∫—É—Å –∞–º–±—Ä–∞" -> ["–º—É—Å–∫—É—Å", "–∞–º–±—Ä–∞"])
  const qWords = q.split(/\s+/).filter(word => word.length > 0); 

  let results = catalog.filter(item=>{
    // 1. –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ú—É–∂—Å–∫–æ–π/–ñ–µ–Ω—Å–∫–∏–π/–•–∏—Ç/–ù–æ–≤–∏–Ω–∫–∞)
    if(["–ñ–µ–Ω—Å–∫–∏–π","–ú—É–∂—Å–∫–æ–π","–£–Ω–∏—Å–µ–∫—Å"].includes(activeGender)&&item.gender!==activeGender) return false;
    if(activeGender==="hit"&&!item.hit) return false;
    if(activeGender==="new"&&!item.new) return false;
    
    // 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É (–ù–∞–∑–≤–∞–Ω–∏–µ –ò–õ–ò –ù–æ—Ç—ã –ò–õ–ò –ë—Ä–µ–Ω–¥)
    if (q) {
        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –Ω–æ—Ç—ã, —É–¥–∞–ª—è—è –∑–∞–ø—è—Ç—ã–µ (–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è), –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–∏—Å–∫–∞
        // –í–∞–∂–Ω–æ: –º—ã —É–¥–∞–ª—è–µ–º –∑–∞–ø—è—Ç—ã–µ –∏–∑ –Ω–æ—Ç, –Ω–æ –Ω–µ –∏–∑ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª "–º—É—Å–∫—É—Å, –∞–º–±—Ä–∞" (—Ö–æ—Ç—è –º—ã —É–∂–µ —É–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏ –æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞)
        const allNotes = `${item.notes.top} ${item.notes.middle} ${item.notes.base}`.toLowerCase().replace(/[,\.\-]/g, ' ');
        
        // –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –±—Ä–µ–Ω–¥—É
        const normalizedName = item.name.toLowerCase();
        const brandMatch = normalizedName.split('‚Äî')[0].trim();
        
        let foundBySearch = false;

        // –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ö–ê–ñ–î–û–ï —Å–ª–æ–≤–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        if(qWords.length > 0) {
            const matchesAllWords = qWords.every(word => 
                normalizedName.includes(word) || 
                brandMatch.includes(word) ||
                allNotes.includes(word)
            );
            
            if(matchesAllWords) {
                foundBySearch = true;
            }
        } else {
            // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø—É—Å—Ç–æ–π, –Ω–æ –º—ã –∑–∞—à–ª–∏ –≤ –±–ª–æ–∫ (q –Ω–µ –ø—É—Å—Ç, —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ), —Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
            foundBySearch = true; 
        }

        if (!foundBySearch) return false;
    }
    return true;
  });

  // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –•–∏—Ç—ã -> –ù–æ–≤–∏–Ω–∫–∏ -> –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
  results.sort((a,b)=>{
    if(a.hit && !b.hit) return -1;
    if(!a.hit && b.hit) return 1;
    if(a.new && !b.new) return -1;
    if(!a.new && b.new) return 1;
    return a.name.localeCompare(b.name);
  });

  if(!results.length){
    grid.innerHTML=`<div style="grid-column:1/-1;text-align:center;color:#777;padding:20px">–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</div>`;
    return;
  }

  results.forEach(item=>{
    const div = document.createElement("div");
    div.className="card";
    div.style.position="relative";

    let badges="";
    if(item.hit) badges+=`<div style="position:absolute;top:8px;left:8px;background:var(--accent);color:#fff;padding:2px 8px;border-radius:6px;font-size:11px;font-weight:600">–•–ò–¢</div>`;
    if(item.new) badges+=`<div style="position:absolute;top:32px;left:8px;background:var(--dark);color:#fff;padding:2px 8px;border-radius:6px;font-size:11px;font-weight:600">NEW</div>`;

    div.innerHTML=`<div class="img" style="background-image:url('${item.img}')"></div>${badges}<div class="info"><div class="name">${item.name}</div><div class="meta">${item.gender}</div></div>`;
    div.onclick=()=>openModal(item);
    grid.appendChild(div);
  });
}

function openModal(item){
  currentItem = item;
  selectedML = null;

  modalPhoto.style.backgroundImage = `url('${item.img}')`;
  modalName.textContent = item.name;
  modalGender.textContent = item.gender;
  modalNotes.innerHTML =
    `<b>–í–µ—Ä—Ö–Ω–∏–µ –Ω–æ—Ç—ã:</b> ${item.notes.top}<br>
     <b>–°—Ä–µ–¥–Ω–∏–µ –Ω–æ—Ç—ã:</b> ${item.notes.middle}<br>
     <b>–ë–∞–∑–æ–≤—ã–µ –Ω–æ—Ç—ã:</b> ${item.notes.base}`;

  priceBlock.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä—ë–º";

  mlOptions.querySelectorAll(".ml").forEach(btn=>{
    btn.onclick = () => {
      selectedML = btn.textContent;

      mlOptions.querySelectorAll(".ml").forEach(b=>b.classList.remove("selected"));
      btn.classList.add("selected");

      const price = item.prices[selectedML];
      priceBlock.textContent = `–¶–µ–Ω–∞ –∑–∞ ${selectedML} –º–ª: ${price} ‚ÇΩ`;
    };
    
    // –°–±—Ä–æ—Å –∫–ª–∞—Å—Å–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
    btn.classList.remove("selected"); 
  });

  modalBack.style.display = "flex";
}

function addToFav(item){
  if(!selectedML){
    alert("–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä—ë–º");
    return;
  }

  const favs = readFavs();

  favs.push({
    name: item.name,
    img: item.img,
    ml: selectedML,
    price: item.prices[selectedML]
  });

  writeFavs(favs);
}

function renderFavs(){
  const favs = readFavs();
  favList.innerHTML = "";
  giftBlock.style.display = favs.length >= 2 ? "block" : "none"; // –ü–æ–¥–∞—Ä–æ–∫ –æ—Ç 2-—Ö —Ç–æ–≤–∞—Ä–æ–≤

  if (!favs.length) {
    favList.innerHTML = `<div style="text-align:center; color:#888; padding:20px 0;">–í–∞—à–∞ –ø–æ–¥–±–æ—Ä–∫–∞ –ø—É—Å—Ç–∞—è.</div>`;
  }

  favs.forEach((item, i) => {
    const div = document.createElement("div");
    div.className = "fav-item";
    
    // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π HTML –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CSS –∫–ª–∞—Å—Å–∞ .fav-item
    div.innerHTML = `
      <img src="${item.img}">
      <div style="flex-grow:1;">
        <div style="font-weight:600; font-size:15px; color:var(--dark);">${item.name}</div>
        <div style="font-size:13px;color:#666">
          ${item.ml} –º–ª ‚Äî ${item.price} ‚ÇΩ
        </div>
      </div>
      <button class="fav-remove" data-i="${i}" style="font-size:20px;background:transparent;border:0;color:#c44;font-weight:700;cursor:pointer">‚úï</button>
    `;

    favList.appendChild(div);
  });

  calculateTotal();

  document.querySelectorAll(".fav-remove").forEach(btn=>{
    btn.onclick=()=>{
      const favs = readFavs();
      favs.splice(btn.dataset.i,1);
      writeFavs(favs);
      renderFavs();
    };
  });
}

function calculateTotal(){
  const favs = readFavs();

  let sum = 0;
  favs.forEach(item => sum += Number(item.price));

  let discount = 0;
  const promo = bookPromo.value.trim().toLowerCase();

  if(promo === "babays"){
    discount = Math.round(sum * 0.1);
    document.getElementById("discountLine").style.display = "block";
  } else {
    document.getElementById("discountLine").style.display = "none";
  }

  document.getElementById("sumPrice").textContent = sum + " ‚ÇΩ";
  document.getElementById("discountPrice").textContent = discount;
  document.getElementById("finalPrice").textContent = (sum - discount) + " ‚ÇΩ";
}

// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
document.querySelectorAll(".deliveryBtn").forEach(btn=>{
  btn.onclick=()=>{
    chosenDelivery = btn.dataset.type;
    document.querySelectorAll(".deliveryBtn").forEach(b=>b.classList.remove("selected"));
    btn.classList.add("selected");
  };
});

// –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É
sendOrder.onclick = () => {
  const favs = readFavs();
  if (!favs.length) return alert("–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä");
  if (!bookName.value.trim()) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è");
  if (!chosenDelivery) return alert("–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É");

  const orderId = Math.floor(1000 + Math.random() * 9000);

  const now = new Date();
  const date = now.toLocaleDateString("ru-RU");
  const time = now.toLocaleTimeString("ru-RU", { hour: "2-digit", minute: "2-digit" });

  let sum = 0;
  favs.forEach(item => sum += Number(item.price));

  const promo = bookPromo.value.trim().toLowerCase();
  let discount = 0;

  if (promo === "babays") {
    discount = Math.round(sum * 0.1);
  }

  const final = sum - discount;

  const orderList = favs
    .map((f, i) => `${i + 1}. ${f.name} (${f.ml} –º–ª) ‚Äî ${f.price} ‚ÇΩ`)
    .join("\n");
    
  const giftText = favs.length >= 2 ? "\nüéÅ –ü–æ–¥–∞—Ä–æ–∫: 1 —à—Ç" : "";


  const text = encodeURIComponent(
`üíé –ë–†–û–ù–¨ –ó–ê–ö–ê–ó–ê ‚Ññ${orderId}
*Babays Perfume* üìÖ ${date} ‚Ä¢ ${time}

üõç *–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:*
${orderList}${giftText}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí∞ –°—É–º–º–∞: ${sum} ‚ÇΩ
${discount ? `üéü –°–∫–∏–¥–∫–∞ (BABAYS): ‚àí${discount} ‚ÇΩ\n` : ""}üí≥ *–ò—Ç–æ–≥–æ:* ${final} ‚ÇΩ
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ –ò–º—è: ${bookName.value}
üöö –î–æ—Å—Ç–∞–≤–∫–∞: ${chosenDelivery}`
  );

  window.location.href = `https://t.me/babaysperfume1?text=${text}`;

  // –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
  localStorage.removeItem(LS_KEY);
  updateFavCount();
  renderFavs(); 
  bookBack.style.display = "none";
};

// ======= –õ–û–ì–ò–ö–ê –ù–ê–í–ò–ì–ê–¶–ò–ò =======

function goToPage(pageId) {
  Object.values(pages).forEach(p => p.classList.remove("active"));
  if (pages[pageId]) {
    pages[pageId].classList.add("active");
  }

  navItems.forEach(item => {
      item.classList.remove("active");
      // –°–±—Ä–æ—Å —Ü–≤–µ—Ç–∞ –∏–∫–æ–Ω–∫–∏, –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
      item.querySelector('svg').style.color = 'var(--muted)';
  });
  
  const activeItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
  if (activeItem) {
    activeItem.classList.add("active");
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏
    activeItem.querySelector('svg').style.color = 'var(--accent)'; 
    pageSubtitle.textContent = activeItem.textContent.trim();
  }
  
  window.scrollTo(0, 0);

  if (pageId === 'catalog') {
    renderCatalog();
  }
}

navItems.forEach(item => {
  item.onclick = () => {
    const pageId = item.dataset.page;
    if(pageId === "fav"){
        // –í—ã–∑–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–æ–¥–∞–ª–∫–∏
        renderFavs(); 
        favBack.style.display="flex";
    } else if (pageId === "support") {
        supportBack.style.display="flex";
    } 
    else {
        goToPage(pageId);
    }
  };
});

openTelegram.onclick = () => {
    supportBack.style.display="none"; 
    window.open("https://t.me/babaysperfume1", '_blank');
};


// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø–æ–∏—Å–∫–∞
searchInput.oninput = e => {searchQuery = e.target.value; renderCatalog();}
const filterSelect = document.getElementById("filterSelect");

filterSelect.onchange = () => {
  activeGender = filterSelect.value;
  renderCatalog();
};


addFavBtn.onclick = () => {
  if(currentItem){
    addToFav(currentItem);
  }
  modalBack.style.display = "none";
};

openBooking.onclick=()=>{if(!readFavs().length) return alert("–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä"); favBack.style.display="none"; bookBack.style.display="flex";}

function makeModalClosable(back,btn){
  btn.onclick=()=>back.style.display="none";
  back.onclick=e=>{if(e.target===back) back.style.display="none";}
}
makeModalClosable(modalBack,closeModalBtn);
makeModalClosable(favBack,closeFav);
makeModalClosable(bookBack,closeBooking);
makeModalClosable(supportBack,closeSupport);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
updateFavCount();
goToPage('home'); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

</script>

</body>
</html>
